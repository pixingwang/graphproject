<!DOCTYPE html>
<html class="no-js" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">


<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>登录</title>
<meta name="description" content="" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<!-- Favicon -->
<link rel="shortcut icon" href="assets/img/favicon.ico"
	type="image/x-icon" />
<!-- Bootstrap core CSS -->
<link rel="stylesheet"
	href="assets/plugins/bootstrap/css/bootstrap.min.css" />
<!-- Fonts  -->
<link rel="stylesheet" href="assets/css/font-awesome.min.css" />
<link rel="stylesheet" href="assets/css/simple-line-icons.css" />
<!-- CSS Animate -->
<link rel="stylesheet" href="assets/css/animate.css" />
<!-- Custom styles for this theme -->
<link rel="stylesheet" href="assets/css/main.css" />
<!-- Feature detection -->
<script src="assets/js/vendor/modernizr-2.6.2.min.js"></script>
<script src="assets/js/vendor/jquery-1.11.1.min.js"></script>
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
    <script src="assets/js/vendor/html5shiv.js"></script>
    <script src="assets/js/vendor/respond.min.js"></script>
    <![endif]-->
</head>

<body>

	<div class="row">
		<div class="col-md-4 col-md-offset-4">
			<div id="login-wrapper">
				<header>
					<div class="brand">
						
						<img  src="image/GraphHub.png" alt="profile" height="74" width="200">
					</div>
				</header>
				<div class="panel panel-primary">
					<div class="panel-heading">欢迎使用GraphHub——图赋能的大数据智能分析平台！</h3>
					</div>
					<div class="panel-body">
						
						<div class="form-group">
							<div class="col-md-12">
								<input type="text" class="form-control" id="email"
									name="user_name" placeholder="Username" /> <i
									class="fa fa-user"></i>
							</div>
						</div>
						<br /> <br />
						<div class="form-group">
							<div class="col-md-12">
								<input type="password" class="form-control" id="password"
									name="password" placeholder="Password" /> <i
									class="fa fa-lock"></i> 
									<a href="javascript:void(0)"class="help-block"></a>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-12">
								<button type="submit" class="btn btn-primary btn-block"
									onclick="login()">登录</button>
								<!--<a href="login" class="btn btn-primary btn-block">Sign in</a> -->
								<hr />
								<a href="registerRequest" class="btn btn-default btn-block">注册</a>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 详细信息模态框（Modal） -->

	<div class="modal fade" id="queryInfo" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form id="formTag" th:action="@{/GraphubConnect}" method="post"
					class="form-horizontal" enctype="multipart/form-data">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">Neo4j详细信息</h4>
					</div>

					<div class="modal-body">
						<div class="input-group">
							<span class="input-group-addon">Neo4j</span> <input type="text"
								class="form-control" id="localPath" readonly="readonly" name="embedded_neo4j_path">
						</div>
					</div>
					<div class="modal-footer">
						<input id="submitButton" class="btn btn-primary" type="submit"
							value="Connect" />
					</div>
				</form>
			</div>
		</div>
	</div>

	<div class="modal fade" id="queryInfo1" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">Neo4j详细信息</h4>
				</div>
				<form id="formTag" th:action="@{/new_index}" method="post"
					class="form-horizontal" enctype="multipart/form-data">
					<div class="modal-body">
						<div class="input-group">
							<span class="input-group-addon">Neo4j用户:</span> <input
								type="text" class="form-control" id="namefar"
								readonly="readonly">
						</div>
					</div>

					<div class="modal-body">
						<div class="input-group">
							<span class="input-group-addon">Neo4j密码:</span> <input
								type="text" class="form-control" id="namepassword"
								readonly="readonly">
						</div>
					</div>

					<div class="modal-body">
						<div class="input-group">
							<span class="input-group-addon">IP:</span> <input type="text"
								class="form-control" id="nameIp" readonly="readonly">
						</div>
					</div>

					<div class="modal-body">
						<div class="input-group">
							<span class="input-group-addon">端口:</span> <input type="text"
								class="form-control" id="namePort" readonly="readonly">
						</div>
					</div>
					<div class="modal-footer">
						<input id="submitButton" class="btn btn-primary" type="submit"
							value="Connect" />
					</div>
				</form>
			</div>
		</div>
	</div>

	<div class="modal fade" id="queryInfo2" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">出错信息</h4>
				</div>
				<div class="modal-body">
					<input type="text" id="error"
						style="border: none; color: red; text-align: center;"
						readonly="readonly">
				</div>
				<div class="modal-footer">
					<a href="loginRequest" class="btn btn-default">重新登录</a>
				</div>
			</div>
		</div>
	</div>

	<!--Global JS-->
	<script src="assets/js/vendor/jquery-1.11.1.min.js"></script>
	<script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/plugins/navgoco/jquery.navgoco.min.js"></script>
	<script src="assets/plugins/pace/pace.min.js"></script>
	<script src="assets/js/src/app.js"></script>
	<script type="text/javascript">
		function login() {
			$.ajax({
				type : "POST",
				url : "/login",
				data : {
					username : $("#email").val(),
					password : $("#password").val()
				},
				dataType : "json",
				success : showQuery
			});
		}

		function showQuery(data) {
			if (data.neo4jLocal == "1") {
				$("#localPath").val(data.neo4j);
				$('#queryInfo').modal('show');
			} else if (data.neo4jFar == "1") {
				$("#namefar").val(data.neo4j_user);
				$("#namepassword").val(data.neo4j_password);
				$("#nameIp").val(data.neo4j_ip);
				$("#namePort").val(data.neo4j_port);
				$('#queryInfo1').modal('show');
			} else {
				$("#error").val(data.error);
				$('#queryInfo2').modal('show');
			}

		}
	</script>

</body>

</html>
